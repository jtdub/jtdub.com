---
layout: post
title: A Net::Telnet::Cisco Example (Save Running Configuration)
date: '2009-05-31T08:48:00.001-05:00'
author: jtdub
tags:
- Cisco Administration Perl Scripting
- Perl Tips
modified_time: '2019-04-11T11:09:42.184-05:00'
blogger_id: tag:blogger.com,1999:blog-2200496390325245811.post-4157643959010687746
blogger_orig_url: https://www.packetgeek.net/2009/05/a-nettelnetcisco-example-save-running_31.html
---

This is a simple perl script that uses the 'Net::Telnet::Cisco' perl module to save the running configuration on a Cisco IOS router or switch. It could be modified to be automated very easily.<br /><pre><br />#!/usr/bin/perl<br /><br />$confDir = '/home/james/cisco_configs';<br />$user  = "changeme";<br />$pass  = "changeme";<br />$enable  = "changeme";<br /><br />use Time::localtime;<br />use Net::Telnet::Cisco;<br /><br />$tm = localtime;<br />($hour,$min,$day,$month,$year) = ($tm->hour,$tm->min,$tm->mday,$tm->mon,$tm->year);<br />$month += 1;<br />$year += 1900;<br /><br />if($ARGV[0]) {<br /> $ip = $ARGV[0];<br /> my $session = Net::Telnet::Cisco->new(Host => "$ip");<br /> $session->login("$user", "$pass");<br /> $session->enable("$enable");<br /> my @output = $session->cmd("show configuration");<br /> open(CONFIG, ">>$confDir/$ip-$month$day$year-$hour$min.txt") <br />                or die "Can't open $confDir/$ip-$month$day$year-$hour$min.txt\n";<br />  print CONFIG @output;<br /> close(CONFIG);<br /> $session->close;<br /> print "\n$ip has been backed up successfully.\n";<br />} else {<br />        print "Error: You must specify an IP Address to connect to.\n";<br />        print "$0 <ip_address>\n";<br />}<br /></pre>