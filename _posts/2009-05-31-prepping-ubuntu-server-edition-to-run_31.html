---
layout: post
title: Prepping Ubuntu Server Edition to run as a DMVPN.
date: '2009-05-31T14:26:00.001-05:00'
author: jtdub
tags:
- Ubuntu SE
- VPN
- Perl Tips
modified_time: '2019-04-11T11:09:41.670-05:00'
blogger_id: tag:blogger.com,1999:blog-2200496390325245811.post-5828400780642779508
blogger_orig_url: https://www.packetgeek.net/2009/05/prepping-ubuntu-server-edition-to-run_31.html
---

After reading about the open source implementation of NHRP, I decided that I would play around with it a bit to see where it's at, development wise. I have a VMWare Session of Ubuntu 9.04 (Server Edition) that I use to geek out on stuff like this. It's nice, because at a click of a button I can have a default install, by reverting to my default snap shot.
<br/>
<br/>
I've determined that the packages that you need to install, on a default install of Ubuntu SE are:
<br/>
<br/>
openssh-server
<br/>
quagga
<br/>
ipsec-tools
<br/>
racoon
<br/>
gcc
<br/>
git
<br/>
git-core
<br/>
pkg-config
<br/>
libc-ares-dev
<br/>
make
<br/>
<br/>
Gcc, make, git, git-core, pkg-config, and libc-ares-dev are the packages required to compile openNHRP from source. They can probably be uninstalled after it's been compiled. :)
<br/>
<br/>
Openssh-server is just used to admin the box remotely. It's easier to do everything over ssh, rather than through the vm window.
<br/>
<br/>
Quagga is the routing software. It's not required to install opennhrp, but I figured I might as well install it. Same goes for ipsec-tools.
<br/>
<br/>
Iproute2, which supports the GRE implementation, is installed by default, so we don't need to worry about it.
<br/>
<br/>
I wrote a quick perl script to run on Ubuntu to check to see whether the packages are installed. If they aren't it installs them via apt-get.
<br/>
<pre><br/>#!/usr/bin/perl<br/><br/>@software = ('openssh-server','ipsec-tools','racoon','quagga','gcc',<br/>     'git','git-core','pkg-config','libc-ares-dev','make');<br/><br/>foreach $pkg (@software) {<br/>    chomp($pkg);<br/>    @dpkg = `dpkg -l | grep $pkg`;<br/>    if(!@dpkg) {<br/>         print "Getting: $pkg\n";<br/>        `sudo apt-get -y install $pkg`;<br/>    } else {<br/>         print "$pkg is already installed.\n";<br/>    }<br/>}<br/></pre>
<br/>
After you run that perl script, opennhrp is ready to install. Download the latest version from http://sourceforge.net/projects/opennhrp/, unpack the contents, then run make and make install. That's it! Now to play with configurations.
