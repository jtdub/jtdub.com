---
layout: post
title: 'RHCE Series: Build a simple RPM that packages a single file.'
date: '2012-10-24T21:31:00.001-05:00'
author: jtdub
tags:
- Linux
- RHCE Study Notes
- OpenNHRP
- RPM
- packetgeek.net
---

Alright, so this is a little more in depth than creating a simple package, but I figured I could full-fill the Red Hat requirement and create a little bit of documentation on how to create the rpm for OpenNHRP in one swoop. :)
<br/>
<pre class="crayon-selected">[root@build ~]# yum install rpmdevtools<br/>Loaded plugins: fastestmirror<br/>Loading mirror speeds from cached hostfile<br/> * base: centos.mirror.lstn.net<br/> * extras: centos.mirror.lstn.net<br/> * updates: centos.mirror.lstn.net<br/><br/>...<br/><br/>Installed:<br/>  rpmdevtools.noarch 0:7.5-1.el6                                                                                            <br/>Complete!<br/><br/>[root@build ~]# adduser rpmuser<br/>[root@build ~]# su - rpmuser<br/>[rpmuser@build ~]$ rpmdev-setuptree <br/>[rpmuser@build ~]$ ls<br/>rpmbuild<br/>[rpmuser@build ~]$ ls rpmbuild/<br/>BUILD  RPMS  SOURCES  SPECS  SRPMS<br/>[rpmuser@build ~]$ cd rpmbuild/SOURCES/<br/>[rpmuser@build SOURCES]$ ls<br/>opennhrp-0.13.1.tar.bz2<br/><br/>[root@build ~]# yum -y install c-ares-devel<br/>[root@build ~]# yum -y groupinstall "Development Tools"<br/><br/>[rpmuser@build rpmbuild]$ cd SPECS/<br/>[rpmuser@build SPECS]$ <br/>[rpmuser@build SPECS]$ vim opennhrp.spec<br/>[rpmuser@build SPECS]$ cat opennhrp.spec <br/>Name:  opennhrp<br/>Version: 0.13.1<br/>Release: 1%{?dist}<br/>Summary: OpenNHRP implements NBMA Next Hop Resolution Protocol (as defined in RFC 2332). It makes it possible to create dynamic multipoint VPN Linux router using NHRP, GRE and IPsec. It aims to be Cisco DMVPN compatible.<br/><br/>#Group:  <br/>License: GNU GPL<br/>URL:  http://sourceforge.net/projects/opennhrp<br/>Source0: ~/rpmbuild/SOURCES/opennhrp-0.13.1.tar.bz2 <br/>BuildRoot: %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)<br/><br/>#BuildRequires: <br/>#Requires: <br/><br/>%description<br/><br/><br/>%prep<br/>%setup -q<br/>touch ~/rpmbuild/BUILD/%{name}-%{version}/configure &amp;&amp; chmod +x ~/rpmbuild/BUILD/%{name}-%{version}/configure <br/><br/>%build<br/>%configure<br/>make %{?_smp_mflags}<br/><br/>%install<br/>rm -rf %{buildroot}<br/>make install DESTDIR=%{buildroot}<br/><br/><br/>%clean<br/>rm -rf %{buildroot}<br/><br/><br/>%files<br/>%defattr(-,root,root,-)<br/>%doc<br/>%config(noreplace) /etc/opennhrp/*<br/>/usr/sbin/opennhrp<br/>/usr/sbin/opennhrpctl<br/>/usr/share/doc/opennhrp/README<br/>/usr/share/man/man5/*<br/>/usr/share/man/man8/*<br/><br/>%changelog<br/><br/><br/>[rpmuser@build SPECS]$ rpmbuild -bb opennhrp.spec<br/><br/>[rpmuser@build SPECS]$ cd ../RPMS/<br/>[rpmuser@build RPMS]$ ls<br/>x86_64<br/>[rpmuser@build RPMS]$ cd x86_64/<br/>[rpmuser@build x86_64]$ ls<br/>opennhrp-0.13.1-1.el6.x86_64.rpm  opennhrp-debuginfo-0.13.1-1.el6.x86_64.rpm</pre>